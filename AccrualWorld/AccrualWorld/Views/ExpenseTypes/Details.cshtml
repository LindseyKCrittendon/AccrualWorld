@model AccrualWorld.Models.ExpenseType

@{
    ViewData["Title"] = "Details";
}




<a asp-controller="ExpenseTypes" asp-action="Index">Back</a>

<div>
    <h4>Expenses</h4>


</div>
<hr />
<dl class="row">
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.Label)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.Label)
    </dd>
</dl>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>
                Date
            </th>
            <th>
                Total
            </th>
            <th>
                Uploaded Receipt
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>

        @foreach (Expense item in Model.Expenses)
        {
            <tr>
                <td>
                    @item.DateTime
                </td>
            
            
                <td>
                    $@item.Total
                </td>
           
            
                <td>
                    <img src="@("~/receipt/" + item.ImagePath)" asp-append-version="true" width="250px" height="250px" />
                </td>

                <td>
                    <a asp-controller="Expenses" asp-action="Edit" asp-route-id="@item.ExpenseId">Edit</a> |
                    <a asp-controller="Expenses" asp-action="Details" asp-route-id="@item.ExpenseId">Details</a> |
                    <a asp-controller="Expenses" asp-action="Delete" asp-route-id="@item.ExpenseId">Delete</a>
                </td>

            </tr>


        }
    </tbody>
    </table>
        <p><strong>Total Expense for this Month:</strong> $@Model.Expenses.Where(i => i.DateTime.Month.ToString() == DateTime.Now.Month.ToString() && i.DateTime.Year.ToString() == DateTime.Now.Year.ToString()).Sum(i => i.Total)</p>
        <p><strong>Total Expense for this Year:</strong> $@Model.Expenses.Where(i => i.DateTime.ToString().Contains(DateTime.Now.Year.ToString())).Sum(i => i.Total)</p>
    
       
    <div>
        <a asp-controller="Expenses" asp-action="Create" class="btn btn-primary">Add an Expense</a>


    </div>
